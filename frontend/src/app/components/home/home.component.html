<div class="flex flex-col h-screen bg-gray-100 text-gray-800">
  <header class="h-16 bg-white flex items-center justify-between shadow-lg pl-6 pr-4">
    <a routerLink="/" class="text-2xl font-bold text-gray-800 cursor-pointer"
      >CSED<span class="text-green-500">Mail</span></a
    >

    <div class="relative grow max-w-xl mx-8">
      <button
        title="Search mail"
        class="absolute left-1.75 top-1/2 transform -translate-y-1/2 p-1.25 rounded-full text-gray-700 hover:bg-gray-100 active:bg-gray-200 focus:outline-none transition-colors duration-400 cursor-pointer"
        aria-label="Search"
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          fill="none"
          viewBox="0 0 24 24"
          stroke-width="1.5"
          stroke="currentColor"
          class="size-5"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            d="m21 21-5.197-5.197m0 0A7.5 7.5 0 1 0 5.196 5.196a7.5 7.5 0 0 0 10.607 10.607Z"
          />
        </svg>
      </button>
      <input
        type="search"
        placeholder="Search mail"
        class="w-full pr-4 pl-10 py-2 border border-gray-300 rounded-full outline-none focus:border-green-500 placeholder-gray-500 text-gray-800 transition-colors"
      />
    </div>

    <div
      class="p-1 rounded-full hover:bg-gray-100 active:bg-gray-200 focus:outline-none transition-colors duration-400"
      [class.!bg-gray-200]="isUserMenuOpen"
    >
      <button
        id="user-menu-button"
        (click)="toggleUserMenu()"
        [title]="userMenuButtonTitle()"
        class="size-10 rounded-full bg-green-500 text-white flex items-center justify-center font-semibold cursor-pointer"
      >
        {{ userInitials() }}
      </button>
    </div>

    @if (isUserMenuOpen) {
      <div
        id="user-menu"
        class="absolute right-4 top-14 bg-white border border-gray-200 rounded-lg shadow-lg"
      >
        <div
          class="flex flex-col gap-2 items-center justify-center p-8 pb-3 text-sm text-gray-700 border-b border-gray-100"
        >
          <span
            class="size-20 rounded-full bg-green-500 text-white flex items-center justify-center text-4xl font-semibold"
          >
            {{ userInitials() }}
          </span>
          <div class="flex flex-col items-center">
            <span class="text-xl font-medium">{{ userName() }}</span>
            <span class="text-sm text-gray-700">{{ userEmail() }}</span>
          </div>
        </div>
        <a
          (click)="signOut()"
          class="block px-4 pt-2 pb-3 text-sm text-gray-700 hover:bg-gray-100 border-t border-gray-100 cursor-pointer"
        >
          Sign out
        </a>
      </div>
    }
  </header>

  <div class="flex grow gap-4 m-4">
    <aside class="w-64 bg-white rounded-2xl flex flex-col shadow-lg pt-6 pb-4 px-4">
      <div class="px-2 mb-4">
        <button
          title="Compose a new email"
          class="w-full flex items-center justify-center space-x-2 px-6 py-3 bg-green-500 text-white font-bold rounded-xl cursor-pointer hover:bg-green-600 transition-colors"
        >
          <svg
            xmlns="http://www.w3.org/2000/svg"
            viewBox="0 0 24 24"
            fill="currentColor"
            class="size-5"
          >
            <path
              d="M21.731 2.269a2.625 2.625 0 0 0-3.712 0l-1.157 1.157 3.712 3.712 1.157-1.157a2.625 2.625 0 0 0 0-3.712ZM19.513 8.199l-3.712-3.712-12.15 12.15a5.25 5.25 0 0 0-1.32 2.214l-.8 2.685a.75.75 0 0 0 .933.933l2.685-.8a5.25 5.25 0 0 0 2.214-1.32L19.513 8.2Z"
            />
          </svg>
          <span>Compose</span>
        </button>
      </div>

      <nav class="grow space-y-1 overflow-y-auto">
        <div class="space-y-1">
          @for (folder of folders; track folder.name) {
            <a
              [title]="folder.name"
              class="flex items-center space-x-3 px-3 py-2 rounded-lg text-gray-700 hover:bg-gray-100 transition-colors cursor-pointer"
              (click)="changeFolder(folder.name)"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                stroke-width="1.5"
                stroke="currentColor"
                class="size-5"
              >
                <path stroke-linecap="round" stroke-linejoin="round" [attr.d]="folder.icon" />
              </svg>
              <span>{{ folder.name }}</span>
              @if (folder.count > 0) {
                <span
                  class="ml-auto text-xs font-bold bg-green-500 text-white px-2 py-0.5 rounded-full"
                  >{{ folder.count }}</span
                >
              }
            </a>
          }
        </div>
        <div class="flex items-center justify-between pl-3 text-gray-700">
          <span class="font-medium select-none">User Folders</span>
          <button
            title="Create a new user folder"
            class="p-1.25 rounded-full hover:bg-gray-100 active:bg-gray-200 focus:outline-none transition-colors duration-400 cursor-pointer"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              fill="none"
              viewBox="0 0 24 24"
              stroke-width="1.5"
              stroke="currentColor"
              class="size-6"
            >
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
            </svg>
          </button>
        </div>
      </nav>
    </aside>

    <main class="bg-white grow rounded-2xl overflow-hidden shadow-lg">
      @if (folder() == "Inbox") {
        <app-inbox  ></app-inbox>
      }
      @if (folder() == "Sent") {
        <app-sent ></app-sent>
      }

    </main>
  </div>
</div>
