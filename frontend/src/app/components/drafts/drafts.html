

<div class="min-h-screen bg-gray-50">
  <!-- Toolbar -->
  <div class="sticky top-0 z-10 bg-white border-b border-gray-200 px-4 py-3">
    <!-- Top Row: Checkbox, Refresh, Bulk Actions, Pagination -->
    <div class="flex items-center justify-between mb-3">
      <div class="flex items-center gap-4">
        <!-- Select All Checkbox -->
        <input
          type="checkbox"
          class="w-5 h-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer"
          [checked]="isAllSelected()"
          (change)="handleSelectAll()"
        >
        <!-- Refresh Button -->
        <button
          class="p-2 hover:bg-gray-100 rounded-full transition-colors"
          (click)="handleRefresh()"
          title="Refresh"
        >
          <span class="text-gray-600">ğŸ”„</span>
        </button>
        <!-- Bulk Actions (visible when items selected) -->
        @if (selectedDrafts().length > 0) {
          <div class="flex items-center gap-2 pl-2 border-l border-gray-300">
            <button
              class="p-2 hover:bg-red-50 rounded-full transition-colors group"
              (click)="handleBulkDelete()"
              title="Delete"
            >
              <span class="group-hover:scale-110 transition-transform inline-block">ğŸ—‘ï¸</span>
            </button>

<!--              <app-move-to-menu-->
<!--                [userFolders]="userFolders"-->
<!--                (folderChange)="handleMoveToFolder($event)">-->
<!--              </app-move-to-menu>-->

          </div>
        }
      </div>
      <!-- Pagination Info -->

    </div>

    <!-- Bottom Row: Filters -->
    <div class="flex items-center gap-4 flex-wrap">
      <!-- Filter By Select -->
<!--        <div class="flex items-center gap-2">-->
<!--          <label class="text-sm text-gray-600 font-medium">Filter:</label>-->
<!--          <select-->
<!--            class="px-3 py-2 border border-gray-300 rounded-lg bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none cursor-pointer"-->
<!--            [value]="filterBy()"-->
<!--            (change)="handleFilterChange($event)"-->
<!--          >-->
<!--            <option value="any">Any</option>-->
<!--            <option value="name">Name</option>-->
<!--            <option value="email">Email</option>-->
<!--            <option value="subject">Subject</option>-->
<!--            <option value="body">Body</option>-->
<!--          </select>-->
<!--        </div>-->

      <!-- Sort By Select -->
<!--        <div class="flex items-center gap-2">-->
<!--          <label class="text-sm text-gray-600 font-medium">Sort:</label>-->
<!--          <select-->
<!--            class="px-3 py-2 border border-gray-300 rounded-lg bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none cursor-pointer"-->
<!--            [value]="sortBy()"-->
<!--            (change)="handleSortChange($event)"-->
<!--          >-->
<!--            <option value="date">Date</option>-->
<!--            <option value="sender">Sender</option>-->
<!--            <option value="subject">Subject</option>-->
<!--            <option value="priority">Priority</option>-->
<!--          </select>-->
<!--        </div>-->





      <!-- Apply Filters Button -->
<!--        <button-->
<!--          class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium text-sm"-->
<!--          (click)="handleRefresh()"-->
<!--        >-->
<!--          Apply-->
<!--        </button>-->
    </div>
  </div>

  <!-- Mail List -->
  <div class="bg-white">
    @for (draft of drafts(); track draft.id) {
      <div
        class="group flex items-center px-4 py-2 border-b border-gray-100 hover:shadow-md hover:z-10 relative cursor-pointer transition-all duration-150"
        [class.bg-white]="!selectedDrafts().includes(draft.id)"
        [class.bg-blue-50]="selectedDrafts().includes(draft.id)"
      >
        <!-- Checkbox -->
        <div class="flex items-center gap-3 shrink-0">
          <input
            type="checkbox"
            class="w-5 h-5 rounded border-gray-300 text-blue-600 focus:ring-blue-500 cursor-pointer"
            [checked]="selectedDrafts().includes(draft.id)"
            (change)="handleCheckDraft(draft.id)"
            (click)="$event.stopPropagation()"
          >

        </div>

        <!-- Mail Content (Clickable Area) -->
        <div
          class="flex items-center flex-1 min-w-0 ml-3"
          (click)="handleClickDraft(draft.id)"
        >




          <!-- Subject & Preview -->
          <div class="flex-1 min-w-0 flex items-baseline gap-2">
            <span class="text-gray-900 truncate">
              {{draft.subject}}
            </span>
            <span class="text-gray-500 truncate text-sm hidden md:inline">
              - {{draft.body | slice:0:60}}{{draft.body.length > 60 ? '...' : ''}}
            </span>
          </div>

          <!-- Priority Badge -->
          @if (draft.priority) {
            <span
              class="shrink-0 px-2 py-0.5 rounded-full text-xs font-medium mx-3"
              [class.bg-red-100]="draft.priority === 'HIGH'"
              [class.bg-yellow-100]="draft.priority === 'MEDIUM'"
              [class.text-green-700]="draft.priority === 'LOW'"
            >
              {{draft.priority}}
            </span>
          }


        </div>

        <!-- Hover Actions -->
        <div class="hidden group-hover:flex items-center gap-1 absolute right-4 bg-white shadow-sm rounded-lg px-1 py-1">
          <button
            class="p-2 hover:bg-gray-100 rounded-full transition-colors"
            (click)="handleDeleteDraft(draft.id); $event.stopPropagation()"
            title="Delete"
          >
            <span class="text-gray-600">ğŸ—‘ï¸</span>
          </button>

        </div>
      </div>
    }

    <!-- Empty State -->
    @if (drafts().length === 0) {
      <div class="flex flex-col items-center justify-center py-20 text-gray-500">
        <span class="text-6xl mb-4">ğŸ“­</span>
        <h3 class="text-xl font-medium text-gray-700 mb-2">Your Draft box is empty</h3>
        <p class="text-sm">Drafts you write will appear here</p>
      </div>
    }
  </div>
</div>

